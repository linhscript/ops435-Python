+ echo 'Test data file: a2_test_data_2'
Test data file: a2_test_data_2
+ cat a2_test_data_2
user1   pts/21   99.247.24.199    Fri Dec 29 18:51:00 2017 - Sat Dec 30 03:25:02 2017  (08:34)    
user1   pts/0    99.247.24.199    Fri Dec 29 02:30:11 2017 - Fri Dec 29 03:25:04 2017  (00:54)    
user1   pts/0    99.247.24.199    Thu Dec 28 18:43:04 2017 - Fri Dec 29 02:19:36 2017  (07:36)    
user1   pts/6    99.247.24.199    Thu Dec 28 16:23:18 2017 - Thu Dec 28 18:42:48 2017  (02:19)    
user1   pts/1    99.247.24.199    Wed Dec 27 10:38:02 2017 - Wed Dec 27 12:10:14 2017  (01:32)    
user1   pts/7    99.247.24.199    Sat Dec 23 21:17:14 2017 - Sun Dec 24 03:25:03 2017  (06:07)    
user2   pts/4    173.34.180.5     Sun Dec 24 20:26:39 2017 - Sun Dec 24 22:48:33 2017  (02:21)    
user2   pts/4    173.34.180.5     Sun Dec 24 20:25:43 2017 - Sun Dec 24 20:26:27 2017  (00:00)    
user2   pts/4    173.34.180.5     Sun Dec 24 20:23:58 2017 - Sun Dec 24 20:25:12 2017  (00:01)    
user2   pts/4    173.34.180.5     Sun Dec 24 19:22:58 2017 - Sun Dec 24 20:23:41 2017  (01:00)    
user2   pts/4    173.34.180.5     Sat Dec 23 20:25:09 2017 - Sat Dec 23 21:38:39 2017  (01:13)    
user3   pts/3    174.112.101.248  Tue Jan  2 14:58:13 2018 - Tue Jan  2 18:53:33 2018  (03:55)    
user3   pts/6    174.112.102.245  Mon Jan  1 17:47:17 2018 - Mon Jan  1 19:03:11 2018  (01:15)    
user3   pts/8    174.112.101.248  Wed Dec 27 18:00:26 2017 - Wed Dec 27 18:24:08 2017  (00:23)    
user4   pts/4    10.40.43.226     Tue Jan  2 13:16:18 2018 - Tue Jan  2 13:26:06 2018  (00:09)    
user4   pts/1    173.32.126.71    Sun Dec 31 00:22:25 2017 - Sun Dec 31 01:42:15 2017  (01:19)    
user4   pts/4    173.32.126.71    Fri Dec 29 16:13:18 2017 - Fri Dec 29 16:13:39 2017  (00:00)    
user4   pts/2    173.32.126.71    Fri Dec 29 02:13:45 2017 - Fri Dec 29 02:35:50 2017  (00:22)    
user4   pts/3    70.31.84.173     Sat Dec 23 22:00:01 2017 - Sat Dec 23 22:52:13 2017  (00:52)    
user5   pts/4    192.0.172.162    Sat Dec 30 23:38:51 2017 - Sun Dec 31 00:46:44 2017  (01:07)    
user5   pts/7    192.0.172.162    Sat Dec 30 23:38:00 2017 - Sun Dec 31 00:46:36 2017  (01:08)    
user5   pts/5    192.0.172.162    Fri Dec 29 21:41:21 2017 - Sat Dec 30 00:17:47 2017  (02:36)    
user5   pts/22   192.0.172.162    Fri Dec 29 13:52:17 2017 - Sat Dec 30 00:17:53 2017  (10:25)    
user5   pts/11   192.0.172.162    Fri Dec 29 13:35:41 2017 - Fri Dec 29 15:32:09 2017  (01:56)    
user5   pts/2    192.0.172.162    Thu Dec 28 23:47:10 2017 - Fri Dec 29 01:34:18 2017  (01:47)    
user5   pts/6    192.0.172.162    Thu Dec 28 23:12:21 2017 - Fri Dec 29 01:34:18 2017  (02:21)    
user5   pts/1    192.0.172.162    Thu Dec 28 23:12:21 2017 - Thu Dec 28 23:28:22 2017  (00:16)    
user5   pts/5    192.0.172.162    Thu Dec 28 22:27:23 2017 - Thu Dec 28 22:47:40 2017  (00:20)    
user5   pts/5    192.0.172.162    Tue Dec 26 00:13:51 2017 - Tue Dec 26 00:14:04 2017  (00:00)    
user5   pts/1    192.0.172.162    Mon Dec 25 23:40:51 2017 - Tue Dec 26 00:24:09 2017  (00:43)    
user5   pts/0    192.0.172.162    Mon Dec 25 23:36:57 2017 - Tue Dec 26 00:25:37 2017  (00:48)    
+ ./ur.py -h
usage: ur.py [-h ] [-l {user,host}] [-r RHOST] [-t {daily,weekly,monthly}]
             [-u USER] [-v]
             F [F ...]

Usage Report based on the last command

positional arguments:
  F                     list of files to be processed

optional arguments:
  -h, --help            show this help message and exit
  -l {user,host}, --list {user,host}
                        generate user name or remote host IP from the given
                        files
  -r RHOST, --rhost RHOST
                        usage report for the given remote host IP
  -t {daily,weekly,monthly}, --type {daily,weekly,monthly}
                        type of report: daily, weekly, and monthly
  -u USER, --user USER  usage report for the given user name
  -v, --verbose         tune on output verbosity

Copyright 2018 - Raymond Chan
+ ./ur.py -l user a2_test_data_2
User list for a2_test_data_2
============================
user1
user2
user3
user4
user5
+ ./ur.py -l host a2_test_data_2
Host list for a2_test_data_2
============================
10.40.43.226
173.32.126.71
173.34.180.5
174.112.101.248
174.112.102.245
192.0.172.162
70.31.84.173
99.247.24.199
+ ./ur.py -u user5 -t daily a2_test_data_2
Daily Usage Report for user5
============================
Date          Usage in Seconds
2017 12 31        5600
2017 12 30        4727
2017 12 29       63084
2017 12 28        5805
2017 12 26        2999
2017 12 25        2530
Total            84745
+ ./ur.py -u user5 -t weekly a2_test_data_2
Weekly Usage Report for user5
=============================
Week #        Usage in Seconds
2017 52          84745
Total            84745
+ ./ur.py -u user5 -t monthly a2_test_data_2
Monthly Usage Report for user5
==============================
Month         Usage in Seconds
2017 12          84745
Total            84745
+ ./ur.py -r 173.32.126.71 -t daily a2_test_data_2
Daily Usage Report for 173.32.126.71
====================================
Date          Usage in Seconds
2017 12 31        4790
2017 12 29        1346
Total             6136
+ ./ur.py -r 173.32.126.71 -t weekly a2_test_data_2
Weekly Usage Report for 173.32.126.71
=====================================
Week #        Usage in Seconds
2017 52           6136
Total             6136
+ ./ur.py -r 173.32.126.71 -t monthly a2_test_data_2
Monthly Usage Report for 173.32.126.71
======================================
Month         Usage in Seconds
2017 12           6136
Total             6136
+ ./ur.py -l user a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Generating list for user
User list for a2_test_data_2
============================
user1
user2
user3
user4
user5
+ ./ur.py -l host a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Generating list for host
Host list for a2_test_data_2
============================
10.40.43.226
173.32.126.71
173.34.180.5
174.112.101.248
174.112.102.245
192.0.172.162
70.31.84.173
99.247.24.199
+ ./ur.py -u user5 -t daily a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for user: user5
usage report type: daily
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Daily Usage Report for user5
============================
Date          Usage in Seconds
2017 12 31        5600
2017 12 30        4727
2017 12 29       63084
2017 12 28        5805
2017 12 26        2999
2017 12 25        2530
Total            84745
+ ./ur.py -u user5 -t weekly a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for user: user5
usage report type: weekly
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Weekly Usage Report for user5
=============================
Week #        Usage in Seconds
2017 52          84745
Total            84745
+ ./ur.py -u user5 -t monthly a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for user: user5
usage report type: monthly
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Monthly Usage Report for user5
==============================
Month         Usage in Seconds
2017 12          84745
Total            84745
+ ./ur.py -r 173.32.126.71 -t daily a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for remote host: 173.32.126.71
usage report type: daily
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Daily Usage Report for 173.32.126.71
====================================
Date          Usage in Seconds
2017 12 31        4790
2017 12 29        1346
Total             6136
+ ./ur.py -r 173.32.126.71 -t weekly a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for remote host: 173.32.126.71
usage report type: weekly
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Weekly Usage Report for 173.32.126.71
=====================================
Week #        Usage in Seconds
2017 52           6136
Total             6136
+ ./ur.py -r 173.32.126.71 -t monthly a2_test_data_2 -v
Files to be processed: ['a2_test_data_2']
Type of args for files <class 'list'>
usage report for remote host: 173.32.126.71
usage report type: monthly
processing usage report for the following:
reading login/logout record files ['a2_test_data_2']
Monthly Usage Report for 173.32.126.71
======================================
Month         Usage in Seconds
2017 12           6136
Total             6136
